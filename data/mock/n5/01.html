<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>JLPT N5-01 模擬テスト</title>
<style>
:root {
  --primary: #34c759;
  --primary-dark: #2db350;
  --primary-light: #e8f9ee;
  --bg-gradient: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
  --header-gradient: linear-gradient(135deg, #2e7d32 0%, #4caf50 100%);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Sans', 'Yu Gothic', sans-serif;
  background: var(--bg-gradient);
  min-height: 100vh;
  padding: 16px;
  -webkit-font-smoothing: antialiased;
}
.container {
  max-width: 680px;
  margin: 0 auto;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
  overflow: hidden;
}
/* Header */
.header {
  background: var(--header-gradient);
  color: #fff;
  padding: 24px 20px;
  text-align: center;
}
.header h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 4px;
  letter-spacing: 0.5px;
}
.header .subtitle {
  font-size: 0.85rem;
  opacity: 0.85;
}
/* Home Screen */
.home-content { padding: 24px; }
.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 24px;
}
.stat-card {
  background: var(--header-gradient);
  color: #fff;
  padding: 20px 12px;
  border-radius: 16px;
  text-align: center;
}
.stat-value {
  font-size: 2rem;
  font-weight: 700;
  line-height: 1.2;
}
.stat-label {
  font-size: 0.75rem;
  opacity: 0.9;
  margin-top: 4px;
}
.home-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 28px;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}
.btn:active { transform: scale(0.98); }
.btn-primary {
  background: var(--primary);
  color: #fff;
  font-size: 1.1rem;
  padding: 18px 48px;
}
.btn-primary:hover { background: var(--primary-dark); }
.btn-secondary {
  background: #f0f0f5;
  color: #333;
}
.btn-secondary:hover { background: #e0e0e5; }
.btn-danger {
  background: #ff3b30;
  color: #fff;
}
.btn-row {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}
/* Test Screen */
.test-header {
  background: var(--header-gradient);
  color: #fff;
  padding: 16px 20px;
}
.test-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}
.test-title {
  font-size: 1rem;
  font-weight: 600;
}
.timer {
  font-size: 1.5rem;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}
.timer.warning { color: #ffcc00; }
.timer.danger { color: #ff3b30; animation: blink 1s infinite; }
@keyframes blink { 50% { opacity: 0.6; } }
.progress-container {
  display: flex;
  align-items: center;
  gap: 12px;
}
.progress-bar {
  flex: 1;
  height: 6px;
  background: rgba(255,255,255,0.3);
  border-radius: 3px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  background: #fff;
  transition: width 0.3s ease;
}
.progress-text {
  font-size: 0.85rem;
  font-weight: 500;
  white-space: nowrap;
}
/* Question */
.question-container { padding: 20px; }
.section-badge {
  display: inline-block;
  background: var(--primary-light);
  color: var(--primary-dark);
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  margin-bottom: 16px;
}
.question-text {
  font-size: 1.05rem;
  line-height: 1.8;
  color: #1a1a1a;
  margin-bottom: 20px;
  padding: 16px;
  background: #f8f9fa;
  border-radius: 12px;
  border-left: 4px solid var(--primary);
}
.question-text u { 
  text-decoration: none;
  background: var(--primary-light);
  padding: 2px 4px;
  border-radius: 4px;
  font-weight: 600;
}
.options { display: flex; flex-direction: column; gap: 10px; }
.option {
  display: flex;
  align-items: center;
  padding: 14px 16px;
  background: #fff;
  border: 2px solid #e5e5ea;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
  -webkit-tap-highlight-color: transparent;
}
.option:hover { border-color: var(--primary); background: var(--primary-light); }
.option.selected { border-color: var(--primary); background: var(--primary-light); }
.option.correct { border-color: #34c759; background: #e8f9ee; }
.option.wrong { border-color: #ff3b30; background: #ffebea; }
.option-label {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--primary);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-right: 14px;
  flex-shrink: 0;
}
.option.selected .option-label { background: var(--primary-dark); }
.option.correct .option-label { background: #34c759; }
.option.wrong .option-label { background: #ff3b30; }
.option-text { flex: 1; font-size: 1rem; line-height: 1.5; }
/* Navigation */
.nav-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: #f8f9fa;
  border-top: 1px solid #e5e5ea;
}
.nav-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 20px;
  border: none;
  border-radius: 10px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}
.nav-btn-prev, .nav-btn-next {
  background: var(--primary);
  color: #fff;
}
.nav-btn-prev:hover, .nav-btn-next:hover { background: var(--primary-dark); }
.nav-btn-submit {
  background: #34c759;
  color: #fff;
  padding: 12px 24px;
}
.nav-btn-submit:hover { background: #2db350; }
.nav-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
/* Results */
.results-content { padding: 24px; }
.score-card {
  background: var(--header-gradient);
  color: #fff;
  padding: 32px 24px;
  border-radius: 20px;
  text-align: center;
  margin-bottom: 24px;
}
.score-value {
  font-size: 4rem;
  font-weight: 800;
  line-height: 1;
  margin-bottom: 8px;
}
.score-detail {
  font-size: 1rem;
  opacity: 0.9;
}
.pass-badge {
  display: inline-block;
  padding: 8px 20px;
  border-radius: 20px;
  font-weight: 700;
  margin-top: 12px;
}
.pass-badge.pass { background: #34c759; }
.pass-badge.fail { background: #ff3b30; }
/* Section Scores */
.section-scores {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin-bottom: 24px;
}
.section-score-card {
  background: #f8f9fa;
  padding: 16px;
  border-radius: 12px;
  text-align: center;
  border-left: 4px solid var(--primary);
}
.section-score-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
}
.section-score-label {
  font-size: 0.8rem;
  color: #666;
  margin-top: 4px;
}
/* Answer Review */
.review-section {
  margin-top: 24px;
}
.review-title {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.review-toggle {
  background: var(--primary-light);
  color: var(--primary);
  border: none;
  padding: 12px 20px;
  border-radius: 10px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  margin-bottom: 16px;
}
.answer-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 400px;
  overflow-y: auto;
}
.answer-item {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 16px;
  border-left: 4px solid #34c759;
}
.answer-item.wrong {
  border-left-color: #ff3b30;
  background: #fff5f5;
}
.answer-q-num {
  font-size: 0.8rem;
  font-weight: 600;
  color: #666;
  margin-bottom: 8px;
}
.answer-q-text {
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 12px;
}
.answer-result {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 0.9rem;
}
.answer-your {
  color: #ff3b30;
}
.answer-correct {
  color: #34c759;
  font-weight: 600;
}
/* Results Actions */
.results-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 24px;
}
/* Audio Button */
.audio-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 12px 24px;
  border-radius: 25px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 16px;
  transition: all 0.2s;
}
.audio-btn:hover { background: var(--primary-dark); }
.audio-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.audio-btn.playing { animation: pulse 1s infinite; }
@keyframes pulse { 50% { opacity: 0.7; } }
/* Utilities */
.hidden { display: none !important; }
/* Responsive */
@media (max-width: 480px) {
  body { padding: 8px; }
  .header { padding: 20px 16px; }
  .header h1 { font-size: 1.3rem; }
  .stats-grid { gap: 8px; }
  .stat-card { padding: 16px 8px; }
  .stat-value { font-size: 1.6rem; }
  .question-container { padding: 16px; }
  .question-text { padding: 12px; font-size: 1rem; }
  .option { padding: 12px 14px; }
  .nav-bar { padding: 12px 16px; }
  .nav-btn { padding: 10px 16px; font-size: 0.9rem; }
  .score-value { font-size: 3rem; }
}

/* 聴解アイコン表示 */
.listening-icons {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 20px;
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}
.icon-option {
  background: #f8f9fa;
  border: 3px solid #e9ecef;
  border-radius: 16px;
  padding: 16px 8px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
}
.icon-option:hover {
  border-color: var(--primary);
  background: #f0f4ff;
  transform: translateY(-2px);
}
.icon-option.selected {
  border-color: var(--primary);
  background: #e8edff;
}
.icon-display {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 2px;
  min-height: 44px;
  margin-bottom: 4px;
  flex-wrap: wrap;
}
.icon-display .icon {
  font-size: 32px;
  line-height: 1;
}
.icon-display.count-3 .icon { font-size: 28px; }
.icon-display.count-4 .icon { font-size: 24px; }
.icon-display.count-5 .icon { font-size: 20px; }
.icon-number {
  font-size: 16px;
  font-weight: 600;
  color: #666;
}

</style>
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <h1>🇯🇵 JLPT N5-01</h1>
    <div class="subtitle">第1回模擬テスト | v2.0.0</div>
  </div>

  <!-- Home Screen -->
  <div id="home" class="home-content">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="stat-best">-%</div>
        <div class="stat-label">最高スコア</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="stat-attempts">0</div>
        <div class="stat-label">受験回数</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="stat-wrong">0</div>
        <div class="stat-label">復習問題</div>
      </div>
    </div>
    <div class="home-actions">
      <button class="btn btn-primary" onclick="startTest()">📝 テスト開始</button>
      <div class="btn-row">
        <button class="btn btn-secondary" onclick="startReview()">📚 復習モード</button>
        <button class="btn btn-danger" onclick="resetData()">🗑️ リセット</button>
      </div>
    </div>
  </div>

  <!-- Test Screen -->
  <div id="test" class="hidden">
    <div class="test-header">
      <div class="test-top">
        <div class="test-title" id="test-title">模擬テスト</div>
        <div class="timer" id="timer">00:00</div>
      </div>
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text" id="progress-text">1 / 15</div>
      </div>
    </div>
    <div class="question-container" id="question-container"></div>
    <div class="nav-bar">
      <button class="nav-btn nav-btn-prev" id="btn-prev" onclick="prevQ()">← 前へ</button>
      <button class="nav-btn nav-btn-submit" id="btn-submit" onclick="submitTest()">採点する</button>
      <button class="nav-btn nav-btn-next" id="btn-next" onclick="nextQ()">次へ →</button>
    </div>
  </div>

  <!-- Results Screen -->
  <div id="results" class="results-content hidden">
    <div class="score-card">
      <div class="score-value" id="score-value">0%</div>
      <div class="score-detail" id="score-detail">0問正解 / 15問中</div>
      <div class="pass-badge" id="pass-badge">合格</div>
    </div>
    <div class="section-scores" id="section-scores"></div>
    <div class="review-section">
      <button class="review-toggle" id="review-toggle" onclick="toggleAnswerList()">
        📋 正誤一覧を表示
      </button>
      <div class="answer-list hidden" id="answer-list"></div>
    </div>
    <div class="results-actions">
      <button class="btn btn-primary" onclick="reviewWrong()">❌ 間違えた問題を復習</button>
      <button class="btn btn-secondary" onclick="startTest()">🔄 もう一度挑戦</button>
      <button class="btn btn-secondary" onclick="goHome()">🏠 ホームに戻る</button>
    </div>
  </div>
</div>

<script>
// Test Data (will be replaced)
const TEST = {"id":"N5-01","title":"N5模擬テスト 第1回","questions":[{"text":"きょうは <u>五月</u> 十日です。<br><br>「五月」のよみかたは？","options":["ごがつ","ごかつ","いつがつ","いつかつ"],"answer":0,"type":"漢字読み"},{"text":"この <u>本</u>は だれのですか。<br><br>「本」のよみかたは？","options":["はん","ぽん","ほん","ぼん"],"answer":2,"type":"漢字読み"},{"text":"あそこに <u>男</u>の 子が います。<br><br>「男」のよみかたは？","options":["おんな","おとこ","ひと","こ"],"answer":1,"type":"漢字読み"},{"text":"<u>北</u>の くにから きました。<br><br>「北」のよみかたは？","options":["にし","ひがし","みなみ","きた"],"answer":3,"type":"漢字読み"},{"text":"あしたは <u>金曜日</u>です。<br><br>「金曜日」のよみかたは？","options":["きんようび","ぎんようび","どようび","げつようび"],"answer":0,"type":"漢字読み"},{"text":"<u>水</u>を のみます。<br><br>「水」のよみかたは？","options":["き","ひ","みず","つち"],"answer":2,"type":"漢字読み"},{"text":"<u>毎日</u> べんきょうします。<br><br>「毎日」のよみかたは？","options":["まいねん","まいにち","まいげつ","まいしゅう"],"answer":1,"type":"漢字読み"},{"text":"この <u>店</u>は ゆうめいです。<br><br>「店」のよみかたは？","options":["みせ","いえ","まち","みち"],"answer":0,"type":"漢字読み"},{"text":"<u>千円</u> かしてください。<br><br>「千円」のよみかたは？","options":["ぜんえん","せんえん","せんまる","ぜんまる"],"answer":1,"type":"漢字読み"},{"text":"<u>白</u>い シャツを かいました。<br><br>「白」のよみかたは？","options":["しろ","あか","あお","くろ"],"answer":0,"type":"漢字読み"},{"text":"<u>外国</u>に いきます。<br><br>「外国」のよみかたは？","options":["そとくに","がいこく","そとごく","がいごく"],"answer":1,"type":"漢字読み"},{"text":"<u>午後</u>に あいましょう。<br><br>「午後」のよみかたは？","options":["ごぜん","ごご","ごちゅう","ごじ"],"answer":1,"type":"漢字読み"},{"text":"<u>でんしゃ</u>で いきます。<br><br>「でんしゃ」のかきかたは？","options":["電車","田車","雷車","店車"],"answer":0,"type":"表記"},{"text":"<u>みぎ</u>に まがってください。<br><br>「みぎ」のかきかたは？","options":["石","左","右","后"],"answer":2,"type":"表記"},{"text":"<u>あめ</u>が ふっています。<br><br>「あめ」のかきかたは？","options":["天","水","空","雨"],"answer":3,"type":"表記"},{"text":"<u>ぶん</u>を かきます。<br><br>「ぶん」のかきかたは？","options":["分","今","前","文"],"answer":3,"type":"表記"},{"text":"<u>なまえ</u>を おしえてください。<br><br>「なまえ」のかきかたは？","options":["各前","名毎","名前","名先"],"answer":2,"type":"表記"},{"text":"<u>ちち</u>は かいしゃいんです。<br><br>「ちち」のかきかたは？","options":["母","父","私","友"],"answer":1,"type":"表記"},{"text":"<u>きた</u>の ほうへ いきます。<br><br>「きた」のかきかたは？","options":["東","南","西","北"],"answer":3,"type":"表記"},{"text":"あした <u>かいもの</u>に いきます。<br><br>「かいもの」のかきかたは？","options":["買物","売物","貸物","待物"],"answer":0,"type":"表記"},{"text":"おなかが すきましたから、（　　） たべたいです。<br><br>（　）になにがはいりますか。","options":["だれか","なにか","どこか","いつか"],"answer":1,"type":"文脈規定"},{"text":"あついですね。（　　）を つけましょう。<br><br>（　）になにがはいりますか。","options":["テレビ","ストーブ","エアコン","ラジオ"],"answer":2,"type":"文脈規定"},{"text":"テストが はじまります。（　　）に なってください。<br><br>（　）になにがはいりますか。","options":["にぎやか","きれい","じょうず","しずか"],"answer":3,"type":"文脈規定"},{"text":"エレベーターが（　　）から、かいだんで いきましょう。<br><br>（　）になにがはいりますか。","options":["とまっている","すくない","ひろい","おそい"],"answer":0,"type":"文脈規定"},{"text":"きのう、デパートで たくさん （　　）を しました。<br><br>（　）になにがはいりますか。","options":["さんぽ","かいもの","べんきょう","しごと"],"answer":1,"type":"文脈規定"},{"text":"さとうさんは ギターが （　　）です。<br><br>（　）になにがはいりますか。","options":["はやい","かるい","じょうず","ふとい"],"answer":2,"type":"文脈規定"},{"text":"（　　）を めくって ください。<br><br>（　）になにがはいりますか。","options":["ポスト","コピー","ノート","ページ"],"answer":3,"type":"文脈規定"},{"text":"もうすこし （　　） はなしてください。<br><br>（　）になにがはいりますか。","options":["ゆっくり","ちいさく","はやく","ひろく"],"answer":0,"type":"文脈規定"},{"text":"ゆうべ、パーティーに いったので （　　）です。<br><br>（　）になにがはいりますか。","options":["くらい","ねむい","わかい","あぶない"],"answer":1,"type":"文脈規定"},{"text":"この こうえんは （　　）です。<br><br>（　）になにがはいりますか。","options":["あまい","まるい","ひろい","みじかい"],"answer":2,"type":"文脈規定"},{"text":"あの ひとは <u>おなじ</u> かいしゃの ひとなんです。<br><br>「おなじ」に ちかい いみの ことばは？","options":["べつの","ちがう","となりの","いっしょの"],"answer":3,"type":"言い換え類義"},{"text":"<u>だいたい</u> わかりました。<br><br>「だいたい」に ちかい いみの ことばは？","options":["ほとんど","ぜんぶ","すこしだけ","ぜんぜん"],"answer":0,"type":"言い換え類義"},{"text":"<u>たびたび</u> あいますね。<br><br>「たびたび」に ちかい いみの ことばは？","options":["はじめて","よく","ときどき","ぜんぜん"],"answer":1,"type":"言い換え類義"},{"text":"この りょうりは <u>からい</u>です。<br><br>「からい」に ちかい いみの ことばは？","options":["さとうが たくさんです","みずが たくさんです","とうがらしが たくさんです","しおが たくさんです"],"answer":2,"type":"言い換え類義"},{"text":"<u>さっき</u> でんわが ありました。<br><br>「さっき」に ちかい いみの ことばは？","options":["いま","これから","あとで","すこし まえに"],"answer":3,"type":"言い換え類義"},{"text":"「つける」を つかった 文で ただしいものは？<br><br>ただしいものを えらんでください。","options":["エアコンを つけてください。","じしょを つけてください。","ごはんを つけてください。","てを つけてください。"],"answer":0,"type":"用法"},{"text":"「せまい」を つかった 文で ただしいものは？<br><br>ただしいものを えらんでください。","options":["この えんぴつは せまいです。","この みちは せまいです。","この テストは せまいです。","この ケーキは せまいです。"],"answer":1,"type":"用法"},{"text":"「ぬぐ」を つかった 文で ただしいものは？<br><br>ただしいものを えらんでください。","options":["ぼうしを ぬいでください。","かさを ぬいでください。","くつを ぬいでください。","テレビを ぬいでください。"],"answer":2,"type":"用法"},{"text":"「ひく」を つかった 文で ただしいものは？<br><br>ただしいものを えらんでください。","options":["おんがくを ひきます。","しんぶんを ひきます。","パンを ひきます。","ピアノを ひきます。"],"answer":3,"type":"用法"},{"text":"「あかるい」を つかった 文で ただしいものは？<br><br>ただしいものを えらんでください。","options":["この へやは あかるいです。","この りんごは あかるいです。","この おちゃは あかるいです。","この はなは あかるいです。"],"answer":0,"type":"用法"},{"text":"わたしは あした デパート（　　） いきます。<br><br>（　）になにがはいりますか。","options":["を","に","が","は"],"answer":1,"type":"文法形式"},{"text":"机の 上に ほん（　　） ノートが あります。<br><br>（　）になにがはいりますか。","options":["に","を","と","が"],"answer":2,"type":"文法形式"},{"text":"にちようびは どこ（　　） いきませんでした。<br><br>（　）になにがはいりますか。","options":["へ","に","を","も"],"answer":3,"type":"文法形式"},{"text":"バス（　　） きました。<br><br>（　）になにがはいりますか。","options":["で","に","を","へ"],"answer":0,"type":"文法形式"},{"text":"しゅくだいを （　　）から、あそびに いきます。<br><br>（　）になにがはいりますか。","options":["した","して","する","しない"],"answer":1,"type":"文法形式"},{"text":"おんがくを （　　）ながら べんきょうします。<br><br>（　）になにがはいりますか。","options":["きいて","きく","きき","きいた"],"answer":2,"type":"文法形式"},{"text":"きのうは あまり （　　）です。<br><br>（　）になにがはいりますか。","options":["あつい","あつくない","あつかった","あつくなかった"],"answer":3,"type":"文法形式"},{"text":"もう 晩ごはんを （　　）か。<br><br>（　）になにがはいりますか。","options":["たべました","たべます","たべて","たべる"],"answer":0,"type":"文法形式"},{"text":"まどを （　　）ください。<br><br>（　）になにがはいりますか。","options":["あける","あけて","あけた","あけ"],"answer":1,"type":"文法形式"},{"text":"だれ（　　） いませんか。<br><br>（　）になにがはいりますか。","options":["を","に","も","は"],"answer":2,"type":"文法形式"},{"text":"さとうさんは どこに （　　）か。<br><br>（　）になにがはいりますか。","options":["あります","いく","する","います"],"answer":3,"type":"文法形式"},{"text":"テニスが （　　） ありません。<br><br>（　）になにがはいりますか。","options":["じょうずでは","じょうずだ","じょうずに","じょうず"],"answer":0,"type":"文法形式"},{"text":"ここは わたしの （　　）です。<br><br>（　）になにがはいりますか。","options":["やま","いえ","くに","がっこう"],"answer":1,"type":"文法形式"},{"text":"あの ケーキを （　　） ください。<br><br>（　）になにがはいりますか。","options":["さんにん","さんぼん","みっつ","さんまい"],"answer":2,"type":"文法形式"},{"text":"らいしゅう 友だちに （　　）。<br><br>（　）になにがはいりますか。","options":["あいました","あって","あう","あいます"],"answer":3,"type":"文法形式"},{"text":"あしたは 友だち（　　）えいが（　　）みます。<br><br>（　）になにがはいりますか。","options":["と・を","に・が","で・に","を・と"],"answer":0,"type":"文の組み立て"},{"text":"あそこに 白い ちいさい くるま（　　）あります。<br><br>（　）になにがはいりますか。","options":["を","が","に","は"],"answer":1,"type":"文の組み立て"},{"text":"わたしは きのう ひとりで デパート（　　）いきました。<br><br>（　）になにがはいりますか。","options":["を","が","へ","は"],"answer":2,"type":"文の組み立て"},{"text":"この なまえを ここに かいて（　　）。<br><br>（　）になにがはいりますか。","options":["います","あります","します","ください"],"answer":3,"type":"文の組み立て"},{"text":"あねは 銀行（　　）はたらいています。<br><br>（　）になにがはいりますか。","options":["で","に","を","へ"],"answer":0,"type":"文の組み立て"},{"text":"（手紙の文）田中さん、お元気ですか。わたしは 今 日本に います。日本は 今 冬です。（　）さむいです。でも、とても たのしいです。<br><br>（　）になにがはいりますか。","options":["あまり","とても","すこし","ぜんぜん"],"answer":1,"type":"文章の文法"},{"text":"（手紙の文）あしたは 日曜日です。わたしは 友だちと 山へ （　）。<br><br>（　）になにがはいりますか。","options":["いきました","いきたい","いきます","いって"],"answer":2,"type":"文章の文法"},{"text":"（手紙の文）山で 写真を たくさん （　）。<br><br>（　）になにがはいりますか。","options":["かきます","のみます","よみます","とります"],"answer":3,"type":"文章の文法"},{"text":"（手紙の文）田中さんも （　） 日本へ 来てください。<br><br>（　）になにがはいりますか。","options":["また","まだ","まで","もう"],"answer":0,"type":"文章の文法"},{"text":"（手紙の文）では、さようなら。（　）<br><br>（　）になにがはいりますか。","options":["おねがいします","お元気で","すみません","ありがとう"],"answer":1,"type":"文章の文法"},{"text":"わたしは 毎朝 七時に おきます。パンを たべて コーヒーを のみます。それから 学校へ いきます。<br><br>この人は 朝 なにを のみますか。","options":["おちゃ","みず","コーヒー","ジュース"],"answer":2,"type":"読解（短文）"},{"text":"わたしの 家は 駅の 前に あります。ちかくに 銀行と スーパーが あります。とても 便利です。<br><br>この人の 家は どこに ありますか。","options":["スーパーの 中","銀行の 後ろ","駅の 中","駅の 前"],"answer":3,"type":"読解（短文）"},{"text":"きのう 友だちと 映画を 見ました。とても おもしろかったです。でも、映画館は 人が 多かったです。<br><br>映画は どうでしたか。","options":["おもしろかった","おもしろくなかった","人が いなかった","静かだった"],"answer":0,"type":"読解（短文）"},{"text":"あしたは 雨です。テニスは しません。家で 本を 読みます。<br><br>あした 何を しますか。","options":["テニスをする","買い物をする","学校へ行く","本を読む"],"answer":3,"type":"読解（短文）"},{"text":"リーさんは 英語が 上手です。日本語も 少し 話すことが できます。<br><br>リーさんは 何語が 上手ですか。","options":["日本語","中国語","英語","フランス語"],"answer":2,"type":"読解（短文）"},{"text":"この かばんは 五千円です。あの 白い かばんは 三千円です。<br><br>白い かばんは いくらですか。","options":["五千円","八千円","二千円","三千円"],"answer":3,"type":"読解（短文）"},{"text":"月曜日に テストが あります。土曜日と 日曜日に たくさん 勉強しました。<br><br>いつ 勉強しましたか。","options":["土曜日と 日曜日","月曜日","金曜日","火曜日"],"answer":0,"type":"読解（短文）"},{"type":"読解（中文）","text":"わたしは きょねん 日本へ いきました。きょうとに 二日、おおさかに 三日 いました。きょうとでは 古い おてらを たくさん みました。とても きれいでした。おおさかでは 食べものが おいしかったです。わたしは おおさかの たべものが いちばん すきです。<br><br>この人は きょうとに 何日 いましたか。","options":["一日","三日","二日","五日"],"answer":2},{"type":"読解（中文）","text":"わたしは きょねん 日本へ いきました。きょうとに 二日、おおさかに 三日 いました。きょうとでは 古い おてらを たくさん みました。とても きれいでした。おおさかでは 食べものが おいしかったです。わたしは おおさかの たべものが いちばん すきです。<br><br>この人は なにが いちばん すきですか。","options":["きょうとの おてら","おおさかの 町","日本の くるま","おおさかの 食べもの"],"answer":3},{"type":"読解（中文）","text":"わたしは きょねん 日本へ いきました。きょうとに 二日、おおさかに 三日 いました。きょうとでは 古い おてらを たくさん みました。とても きれいでした。おおさかでは 食べものが おいしかったです。わたしは おおさかの たべものが いちばん すきです。<br><br>この文の内容とあっているものはどれですか。","options":["おおさかに いってから きょうとに いった。","きょうとで おいしい 食べものを たべた。","きょねん 日本へ りょこうに いった。","日本に 五日間 だけ いた。"],"answer":2},{"type":"読解（中文）","text":"はじめまして。わたしは リーです。スポーツが 大好きです。毎朝 公園で 三十分 はしります。土曜日と 日曜日は ともだちと テニスを します。あまり 上手ではありませんが、とても たのしいです。<br><br>リーさんは 毎朝 なにを しますか。","options":["テニスをする","ともだちと 会う","スポーツを 見る","公園を はしる"],"answer":3},{"type":"読解（中文）","text":"はじめまして。わたしは リーです。スポーツが 大好きです。毎朝 公園で 三十分 はしります。土曜日と 日曜日は ともだちと テニスを します。あまり 上手ではありませんが、とても たのしいです。<br><br>リーさんは いつ テニスを しますか。","options":["休みの日","毎日","平日の 朝","月曜日"],"answer":0},{"type":"読解（中文）","text":"はじめまして。わたしは リーです。スポーツが 大好きです。毎朝 公園で 三十分 はしります。土曜日と 日曜日は ともだちと テニスを します。あまり 上手ではありませんが、とても たのしいです。<br><br>テニスについて 正しいものは どれですか。","options":["リーさんは とても 上手だ。","一人で 練習している。","夜 練習している。","リーさんは あまり 上手ではない。"],"answer":3},{"text":"（中文）らいげつ サッカーの たいかいが あります。わたしの チームは つよいです。<br><br>らいげつ 何が ありますか。","options":["りょこう","しけん","パーティー","たいかい"],"answer":3,"type":"読解（中文）"},{"text":"【ゴミの日】<br>月・木：もえるゴミ<br>火：プラスチック<br>水：ペットボトル<br>金：かみ<br><br>もえるゴミの日は いつですか。","options":["月・木","火・金","水・土","日"],"answer":0,"type":"読解（情報検索）"},{"text":"【ゴミの日】<br>月・木：もえるゴミ<br>火：プラスチック<br>水：ペットボトル<br>金：かみ<br><br>ペットボトルの日は いつですか。","options":["月曜日","金曜日","水曜日","土曜日"],"answer":2,"type":"読解（情報検索）"},{"text":"【ゴミの日】<br>月・木：もえるゴミ<br>火：プラスチック<br>水：ペットボトル<br>金：かみ<br>※土・日は おやすみ<br><br>土曜日は どうですか。","options":["もえるゴミ","プラスチック","おやすみ","かみ"],"answer":2,"type":"読解（情報検索）"},{"text":"おとこのひとと おんなのひとが はなしています。おんなのひとは あした なにを しますか。<br>おとこ：あしたは 休みですね。なにか しますか。<br>おんな：そうですね。せんたくを してから、買いものに いきます。<br>おとこ：そうですか。わたしは 映画を 見に いきます。<br><br>おんなのひとは あした なにを しますか。","options":["映画を 見る","なにも しない","おとこのひとと 遊ぶ","せんたくと 買いもの"],"answer":3,"type":"聴解（課題理解）"},{"text":"みせで おとこのひとと てんいんが はなしています。<br>てんいん：いらっしゃいませ。<br>おとこ：すみません、コーヒーを ひとつ ください。<br>てんいん：ホットと アイス、どちらに しますか。<br>おとこ：ホットを おねがいします。<br><br>おとこのひとは 何を ちゅうもんしましたか。","options":["おちゃ","アイスコーヒー","ホットコーヒー","ジュース"],"answer":2,"type":"聴解（課題理解）","icons":["🍵","☕","☕","🧃"],"counts":[1,1,1,1]},{"text":"駅で アナウンスが あります。<br>「まもなく 2ばんせんに とうきょうゆきの でんしゃが まいります。きいろい せんの うしろで おまちください。」<br><br>でんしゃは 何ばんせんに きますか。","options":["1ばんせん","2ばんせん","3ばんせん","4ばんせん"],"answer":1,"type":"聴解（課題理解）"},{"text":"先生が はなしています。<br>「あしたは テストです。9じに はじまりますから、8じ45ふんまでに きょうしつに きてください。」<br><br>テストは 何じに はじまりますか。","options":["8じ","8じ45ふん","9じ","9じ45ふん"],"answer":2,"type":"聴解（課題理解）"},{"text":"でんわで はなしています。<br>おんな：もしもし、やまださんの おたくですか。<br>おとこ：はい、そうです。<br>おんな：やまださんは いらっしゃいますか。<br>おとこ：いま でかけています。4じごろ かえります。<br><br>やまださんは 何じに かえりますか。","options":["3じ","4じ","5じ","6じ"],"answer":1,"type":"聴解（課題理解）"},{"type":"聴解（ポイント理解）","text":"おとこのひとと おんなのひとが はなしています。おとこのひとは どうして パーティーに いきませんか。<br>おとこ：あしたの パーティー、いきますか。<br>おんな：はい、いきますよ。田中さんは？<br>おとこ：わたしは あした 仕事が たくさん ありますから、いきません。<br>おんな：そうですか。残念ですね。<br><br>おとこのひとは どうして いきませんか。","options":["病気だから","忙しいから","パーティーが きらいだから","お金がないから"],"answer":1},{"text":"おとこのひとが はなしています。<br>「きのう 友だちと えいがを みました。とても おもしろかったです。」<br><br>えいがは どうでしたか。","options":["つまらなかった","ながかった","こわかった","おもしろかった"],"answer":3,"type":"聴解（ポイント理解）"},{"text":"おんなのひとが はなしています。<br>「わたしは まいにち 7じに おきます。8じに いえを でます。」<br><br>おんなのひとは 何じに おきますか。","options":["7じ","8じ","6じ","9じ"],"answer":0,"type":"聴解（ポイント理解）"},{"text":"おとこのひとが はなしています。<br>「わたしの しゅみは おんがくを きくことです。とくに クラシックが すきです。」<br><br>おとこのひとは 何が すきですか。","options":["ジャズ","クラシック","ポップス","ロック"],"answer":1,"type":"聴解（ポイント理解）"},{"text":"せんせいが はなしています。<br>「あしたの じゅぎょうは 10じからです。いつもより 1じかん おそいです。」<br><br>いつもの じゅぎょうは 何じからですか。","options":["10じ","8じ","9じ","11じ"],"answer":2,"type":"聴解（ポイント理解）"},{"text":"おんなのひとが はなしています。<br>「きのう スーパーで やさいを かいました。トマトと にんじんを かいました。」<br><br>何を かいましたか。","options":["くだもの","やさい","にく","さかな"],"answer":1,"type":"聴解（ポイント理解）"},{"text":"おとこのひとが はなしています。<br>「わたしは いぬを かっています。なまえは ポチです。」<br><br>おとこのひとは 何を かっていますか。","options":["ねこ","とり","いぬ","さかな"],"answer":2,"type":"聴解（ポイント理解）"},{"text":"「いただきます。」<br><br>なんと こたえますか。","options":["どうぞ、めしあがれ","ごちそうさまでした","はい、そうです","すみません"],"answer":0,"type":"聴解（即時応答）"},{"text":"「いってきます。」<br><br>なんと こたえますか。","options":["お帰りなさい","いってらっしゃい","こんにちは","おやすみなさい"],"answer":1,"type":"聴解（即時応答）"},{"type":"聴解（即時応答）","text":"すみません、いま 何時ですか。<br><br>なんと こたえますか。","options":["三時ですよ","三枚ですよ","三台ですよ","三本ですよ"],"answer":0},{"text":"「おやすみなさい。」<br><br>なんと こたえますか。","options":["おはようございます","こんにちは","こんばんは","おやすみなさい"],"answer":3,"type":"聴解（即時応答）"},{"text":"「はじめまして。」<br><br>なんと こたえますか。","options":["はじめまして、どうぞ よろしく","さようなら","いただきます","ごちそうさま"],"answer":0,"type":"聴解（即時応答）"},{"text":"「おげんきですか。」<br><br>なんと こたえますか。","options":["いいえ、ちがいます","はい、げんきです","いいえ、そうです","はい、ちがいます"],"answer":1,"type":"聴解（即時応答）"}]};
const LEVEL = "N5";
const TIME_LIMIT = 1500; // seconds
const PASS_SCORE = 60; // percent
const STORAGE_KEY = "fujisan_mock_v200_N5_01";

// State
let currentQ = 0;
let answers = {};
let startTime = null;
let timerInterval = null;
let isReview = false;
let questions = [];
let testResults = null;

// Init
function init() {
  loadStats();
}

function loadStats() {
  const data = getData();
  document.getElementById('stat-best').textContent = data.best !== null ? data.best + '%' : '-%';
  document.getElementById('stat-attempts').textContent = data.attempts || 0;
  document.getElementById('stat-wrong').textContent = (data.wrongQuestions || []).length;
}

function getData() {
  const saved = localStorage.getItem(STORAGE_KEY);
  return saved ? JSON.parse(saved) : { best: null, attempts: 0, wrongQuestions: [] };
}

function saveData(data) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

// Start Test
function startTest() {
  currentQ = 0;
  answers = {};
  isReview = false;
  questions = [...TEST.questions];
  testResults = null;
  
  showScreen('test');
  document.getElementById('test-title').textContent = TEST.title;
  
  startTime = Date.now();
  updateTimer();
  timerInterval = setInterval(updateTimer, 1000);
  
  renderQuestion();
}

function startReview() {
  const data = getData();
  if (!data.wrongQuestions || data.wrongQuestions.length === 0) {
    alert('復習する問題がありません！');
    return;
  }
  
  currentQ = 0;
  answers = {};
  isReview = true;
  questions = data.wrongQuestions.map((q, i) => ({...q, originalIndex: q.index}));
  testResults = null;
  
  showScreen('test');
  document.getElementById('test-title').textContent = '📚 復習モード';
  document.getElementById('timer').textContent = '復習中';
  
  if (timerInterval) clearInterval(timerInterval);
  timerInterval = null;
  
  renderQuestion();
}

// Timer
function updateTimer() {
  const elapsed = Math.floor((Date.now() - startTime) / 1000);
  const remaining = TIME_LIMIT - elapsed;
  
  const timerEl = document.getElementById('timer');
  
  if (remaining <= 0) {
    clearInterval(timerInterval);
    timerEl.textContent = '00:00';
    timerEl.classList.add('danger');
    submitTest();
    return;
  }
  
  const mins = Math.floor(remaining / 60);
  const secs = remaining % 60;
  timerEl.textContent = String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
  
  timerEl.classList.remove('warning', 'danger');
  if (remaining <= 60) {
    timerEl.classList.add('danger');
  } else if (remaining <= 180) {
    timerEl.classList.add('warning');
  }
}

// Render Question
function renderQuestion() {
  const q = questions[currentQ];
  const container = document.getElementById('question-container');
  
  // Progress
  document.getElementById('progress-fill').style.width = ((currentQ + 1) / questions.length * 100) + '%';
  document.getElementById('progress-text').textContent = (currentQ + 1) + ' / ' + questions.length;
  
  // Navigation buttons
  document.getElementById('btn-prev').disabled = currentQ === 0;
  document.getElementById('btn-next').disabled = currentQ === questions.length - 1;
  
  // Question
  let html = '<div class="section-badge">' + (q.section || '問題') + '</div>';
  
  // Audio button for listening
  if (q.audio) {
    html += '<button class="audio-btn" id="audio-btn" onclick="playAudio()">🔊 音声を再生</button>';
  }
  
  html += '<div class="question-text">' + q.text + '</div>';
  
  // アイコン表示（聴解問題でiconsがある場合）
  if (q.icons && q.icons.length === 4) {
    html += '<div class="listening-icons">';
    for (let i = 0; i < 4; i++) {
      const count = q.counts ? q.counts[i] : 1;
      const countClass = count > 2 ? ' count-' + Math.min(count, 5) : '';
      const icons = Array(count).fill('<span class="icon">' + q.icons[i] + '</span>').join('');
      const selected = answers[currentQ] === i ? ' selected' : '';
      html += '<div class="icon-option' + selected + '" onclick="selectAnswer(' + i + ')">';
      html += '<div class="icon-display' + countClass + '">' + icons + '</div>';
      html += '<div class="icon-number">' + (i + 1) + '</div></div>';
    }
    html += '</div>';
  } else {
    // 通常の選択肢表示
    html += '<div class="options">';
    q.options.forEach((opt, i) => {
      const selected = answers[currentQ] === i ? 'selected' : '';
      html += '<div class="option ' + selected + '" onclick="selectAnswer(' + i + ')">';
      html += '<span class="option-label">' + (i + 1) + '</span>';
      html += '<span class="option-text">' + opt + '</span>';
      html += '</div>';
    });
    html += '</div>';
  }
  
  container.innerHTML = html;
}

function selectAnswer(index) {
  answers[currentQ] = index;
  renderQuestion();
}

function prevQ() {
  if (currentQ > 0) {
    currentQ--;
    renderQuestion();
  }
}

function nextQ() {
  if (currentQ < questions.length - 1) {
    currentQ++;
    renderQuestion();
  }
}

// Audio
let isPlaying = false;
function playAudio() {
  if (isPlaying) return;
  const q = questions[currentQ];
  if (!q.audio) return;
  
  const btn = document.getElementById('audio-btn');
  btn.disabled = true;
  btn.classList.add('playing');
  btn.textContent = '🔊 再生中...';
  isPlaying = true;
  
  speechSynthesis.cancel();
  const utterance = new SpeechSynthesisUtterance(q.audio);
  utterance.lang = 'ja-JP';
  utterance.rate = 0.9;
  
  utterance.onend = () => {
    btn.disabled = false;
    btn.classList.remove('playing');
    btn.textContent = '🔊 もう一度再生';
    isPlaying = false;
  };
  
  utterance.onerror = () => {
    btn.disabled = false;
    btn.classList.remove('playing');
    btn.textContent = '🔊 音声を再生';
    isPlaying = false;
  };
  
  speechSynthesis.speak(utterance);
}

// Submit Test
function submitTest() {
  if (timerInterval) {
    clearInterval(timerInterval);
    timerInterval = null;
  }
  
  // Calculate results
  let correct = 0;
  const wrongQuestions = [];
  const sectionScores = {};
  
  questions.forEach((q, i) => {
    const section = q.section || '問題';
    if (!sectionScores[section]) {
      sectionScores[section] = { correct: 0, total: 0 };
    }
    sectionScores[section].total++;
    
    if (answers[i] === q.answer) {
      correct++;
      sectionScores[section].correct++;
    } else {
      wrongQuestions.push({
        ...q,
        index: q.originalIndex !== undefined ? q.originalIndex : i,
        userAnswer: answers[i]
      });
    }
  });
  
  const score = Math.round((correct / questions.length) * 100);
  const passed = score >= PASS_SCORE;
  
  testResults = {
    score,
    correct,
    total: questions.length,
    passed,
    sectionScores,
    wrongQuestions,
    answers: {...answers}
  };
  
  // Save data (not in review mode)
  if (!isReview) {
    const data = getData();
    data.attempts = (data.attempts || 0) + 1;
    if (data.best === null || score > data.best) {
      data.best = score;
    }
    // Update wrong questions list
    const existingWrong = data.wrongQuestions || [];
    wrongQuestions.forEach(wq => {
      if (!existingWrong.find(e => e.text === wq.text)) {
        existingWrong.push(wq);
      }
    });
    // Remove questions that were answered correctly
    data.wrongQuestions = existingWrong.filter(wq => {
      const idx = questions.findIndex(q => q.text === wq.text);
      return idx === -1 || answers[idx] !== wq.answer;
    });
    saveData(data);
  }
  
  // Show results
  showResults();
}

function showResults() {
  showScreen('results');
  
  const { score, correct, total, passed, sectionScores, wrongQuestions } = testResults;
  
  document.getElementById('score-value').textContent = score + '%';
  document.getElementById('score-detail').textContent = correct + '問正解 / ' + total + '問中';
  
  const passBadge = document.getElementById('pass-badge');
  passBadge.textContent = passed ? '合格ライン到達！' : '不合格';
  passBadge.className = 'pass-badge ' + (passed ? 'pass' : 'fail');
  
  // Section scores
  let sectionsHtml = '';
  Object.entries(sectionScores).forEach(([section, scores]) => {
    const pct = Math.round((scores.correct / scores.total) * 100);
    sectionsHtml += '<div class="section-score-card">';
    sectionsHtml += '<div class="section-score-value">' + scores.correct + '/' + scores.total + '</div>';
    sectionsHtml += '<div class="section-score-label">' + section.substring(0, 8) + '</div>';
    sectionsHtml += '</div>';
  });
  document.getElementById('section-scores').innerHTML = sectionsHtml;
  
  // Answer list
  renderAnswerList();
  
  loadStats();
}

function renderAnswerList() {
  const { answers: testAnswers } = testResults;
  let html = '';
  
  questions.forEach((q, i) => {
    const isCorrect = testAnswers[i] === q.answer;
    const userAns = testAnswers[i] !== undefined ? q.options[testAnswers[i]] : '未回答';
    const correctAns = q.options[q.answer];
    
    html += '<div class="answer-item ' + (isCorrect ? '' : 'wrong') + '">';
    html += '<div class="answer-q-num">問' + (i + 1) + ' - ' + (q.section || '問題') + '</div>';
    html += '<div class="answer-q-text">' + q.text.substring(0, 100) + (q.text.length > 100 ? '...' : '') + '</div>';
    html += '<div class="answer-result">';
    if (isCorrect) {
      html += '<div class="answer-correct">✓ 正解: ' + correctAns + '</div>';
    } else {
      html += '<div class="answer-your">✗ あなたの回答: ' + userAns + '</div>';
      html += '<div class="answer-correct">○ 正解: ' + correctAns + '</div>';
    }
    html += '</div></div>';
  });
  
  document.getElementById('answer-list').innerHTML = html;
}

function toggleAnswerList() {
  const list = document.getElementById('answer-list');
  const btn = document.getElementById('review-toggle');
  
  if (list.classList.contains('hidden')) {
    list.classList.remove('hidden');
    btn.textContent = '📋 正誤一覧を隠す';
  } else {
    list.classList.add('hidden');
    btn.textContent = '📋 正誤一覧を表示';
  }
}

function reviewWrong() {
  if (!testResults || testResults.wrongQuestions.length === 0) {
    alert('間違えた問題がありません！');
    return;
  }
  
  currentQ = 0;
  answers = {};
  isReview = true;
  questions = testResults.wrongQuestions.map((q, i) => ({...q}));
  testResults = null;
  
  showScreen('test');
  document.getElementById('test-title').textContent = '❌ 間違えた問題';
  document.getElementById('timer').textContent = '復習中';
  
  renderQuestion();
}

// Navigation
function showScreen(id) {
  ['home', 'test', 'results'].forEach(s => {
    document.getElementById(s).classList.toggle('hidden', s !== id);
  });
}

function goHome() {
  if (timerInterval) {
    clearInterval(timerInterval);
    timerInterval = null;
  }
  showScreen('home');
  loadStats();
}

function resetData() {
  if (confirm('このテストのすべてのデータをリセットしますか？')) {
    localStorage.removeItem(STORAGE_KEY);
    loadStats();
    alert('リセットしました');
  }
}

// Initialize
init();
</script>
</body>
</html>
